# Customizing the Keymap

The variable  contains a map from event names to lists of keysyms that cause those events to occur.

Note

Many players have learned the default set of Ren'Py keybindings, and expect them to be the same from game to game.

In Ren'Py keysyms are strings representing mouse buttons, joystick buttons, or keyboard keys.

Mouse buttons use keysyms of the form 'mouseup\_#' or 'mousedown\_#', where # is a button number. Ren'Py assumes a five button mouse, where buttons 1, 2, and 3 are the left, middle, and right buttons, while buttons 4 and 5 are generated by scrolling the wheel up and down. For example, "mousedown\_1" is generally a press of the left mouse button, "mouseup\_1" is a release of that button, and "mousedown\_4" is a turn of the scroll wheel to the top.

There are two kinds of keyboard keysyms. The first is a string containing a character that is generated when a key is pressed. This is useful for binding alphabetic keys and numbers. Examples of these keysyms include "a", "A", and "7". Note that these are case sensitive, "a" does not match "A". This kind of keysym is only useful when an event generates text - for example, the a key being released will not match `keyup_a`, as no text is generated.

Keyboard keysyms can also be the symbolic name for the key. This can be any of the K\_ constants taken from pygame.constants. This type of keysym looks like "K\_BACKSPACE", "K\_RETURN", and "K\_TAB"; a full list of this kind of keysyms may be found .

Keyboard and Mouse keysyms may be preceded by the following prefixes, separated by underscores:

alt

Matches if the Alt key is pressed. Keysyms without this prefix match when the Alt key is not pressed.

meta

Matches if the Meta, Command, or Windows key is pressed. Keysyms without this prefix match when the meta key is not pressed.

ctrl

Matches if the Ctrl key is pressed. Keysyms without this prefix match when the Ctrl key is not pressed. (Ctrl is not very useful, as it usually triggers skipping.)

osctrl

This is Alt on the Macintosh, and Ctrl elsewhere.

anymod

Matches regardless of the state of the Alt, Meta, or Ctrl keys.

shift

Matches when the Shift key is pressed.

noshift

Matches when the Shift key is not pressed.

caps

Matches when the Caps Lock key is on.

nocaps

Matches when the Caps Lock key is off.

num

Matches when the Num Lock key is on.

nonum

Matches when the Num Lock key is off.

repeat

Matches when the key is a repeat due to the key being held down. Keysyms without the repeat or any prefixes do not match repeats. (This does not work with mouse buttons.)

anyrepeat

Matches both initial keypresses and repeats.

keydown

Matches when the key is being pressed down (the default).

keyup

Matches when the key is being released.

For example, the keysym "shift\_alt\_K\_F5" will match the F5 key being pressed while Shift and Alt are held down. The keysym "shift\_mouse\_1" will match the left mouse button being pressed while Shift is held down.

To change a binding, update the appropriate list in . The following adds the 't' key to the list of keys that dismiss a say statement, and removes the space key from that list.

init python:
    config.keymap\['dismiss'\].append('K\_t')
    config.keymap\['dismiss'\].remove('K\_SPACE')

The default keymap is contained inside renpy/common/00keymap.rpy, and as of version 8.1.0 is as follows:

config.keymap \= dict(

    \# Bindings present almost everywhere, unless explicitly
    \# disabled.
    rollback \= \[ 'any\_K\_PAGEUP', 'any\_KP\_PAGEUP', 'K\_AC\_BACK', 'mousedown\_4' \],
    screenshot \= \[ 'alt\_K\_s', 'alt\_shift\_K\_s', 'noshift\_K\_s' \],
    toggle\_afm \= \[ \],
    toggle\_fullscreen \= \[ 'alt\_K\_RETURN', 'alt\_K\_KP\_ENTER', 'K\_F11', 'noshift\_K\_f' \],
    game\_menu \= \[ 'K\_ESCAPE', 'K\_MENU', 'K\_PAUSE', 'mouseup\_3' \],
    hide\_windows \= \[ 'mouseup\_2', 'noshift\_K\_h' \],
    launch\_editor \= \[ 'shift\_K\_e' \],
    dump\_styles \= \[ \],
    reload\_game \= \[ 'alt\_K\_r', 'shift\_K\_r' \],
    inspector \= \[ 'alt\_K\_i', 'shift\_K\_i' \],
    full\_inspector \= \[ 'alt\_shift\_K\_i' \],
    developer \= \[ 'alt\_K\_d', 'shift\_K\_d', \],
    quit \= \[ \],
    iconify \= \[ \],
    help \= \[ 'K\_F1', 'meta\_shift\_/' \],
    choose\_renderer \= \['alt\_K\_g', 'shift\_K\_g' \],
    progress\_screen \= \[ 'alt\_shift\_K\_p', 'meta\_shift\_K\_p', 'K\_F2' \],
    accessibility \= \[ 'shift\_K\_a' \],

    \# Accessibility.
    self\_voicing \= \[ 'alt\_K\_v', 'K\_v' \],
    clipboard\_voicing \= \[ 'alt\_shift\_K\_c', 'shift\_K\_c' \],
    debug\_voicing \= \[ 'alt\_shift\_K\_v', 'meta\_shift\_K\_v' \],

    \# Say.
    rollforward \= \[ 'any\_K\_PAGEDOWN', 'any\_KP\_PAGEDOWN', 'mousedown\_5', \],
    dismiss \= \[ 'K\_RETURN', 'K\_SPACE', 'K\_KP\_ENTER', 'K\_SELECT', 'mouseup\_1' \],
    dismiss\_unfocused \= \[ \],

    \# Pause.
    dismiss\_hard\_pause \= \[ \],

    \# Focus.
    focus\_left \= \[ 'any\_K\_LEFT', 'any\_KP\_LEFT' \],
    focus\_right \= \[ 'any\_K\_RIGHT', 'any\_KP\_RIGHT' \],
    focus\_up \= \[ 'any\_K\_UP', 'any\_KP\_UP' \],
    focus\_down \= \[ 'any\_K\_DOWN', 'any\_KP\_DOWN' \],

    \# Button.
    button\_ignore \= \[ 'mousedown\_1' \],
    button\_select \= \[ 'K\_RETURN', 'K\_KP\_ENTER', 'K\_SELECT', 'mouseup\_1',  \],
    button\_alternate \= \[ 'mouseup\_3' \],
    button\_alternate\_ignore \= \[ 'mousedown\_3' \],

    \# Input.
    input\_backspace \= \[ 'any\_K\_BACKSPACE' \],
    input\_enter \= \[ 'K\_RETURN', 'K\_KP\_ENTER' \],
    input\_next\_line \= \[ 'shift\_K\_RETURN', 'shift\_K\_KP\_ENTER' \],
    input\_left \= \[ 'any\_K\_LEFT', 'any\_KP\_LEFT' \],
    input\_right \= \[ 'any\_K\_RIGHT', 'any\_KP\_RIGHT' \],
    input\_up \= \[ 'any\_K\_UP', 'any\_KP\_UP' \],
    input\_down \= \[ 'any\_K\_DOWN', 'any\_KP\_DOWN' \],
    input\_delete \= \[ 'any\_K\_DELETE', 'any\_KP\_DELETE' \],
    input\_home \= \[ 'K\_HOME', 'KP\_HOME', 'meta\_K\_LEFT' \],
    input\_end \= \[ 'K\_END', 'KP\_END', 'meta\_K\_RIGHT' \],
    input\_copy \= \[ 'ctrl\_noshift\_K\_INSERT', 'ctrl\_noshift\_K\_c', 'meta\_noshift\_K\_c' \],
    input\_paste \= \[ 'shift\_K\_INSERT', 'ctrl\_noshift\_K\_v', 'meta\_noshift\_K\_v' \],
    input\_jump\_word\_left \= \[ 'osctrl\_K\_LEFT', 'osctrl\_KP\_LEFT' \],
    input\_jump\_word\_right \= \[ 'osctrl\_K\_RIGHT', 'osctrl\_KP\_RIGHT' \],
    input\_delete\_word \= \[ 'osctrl\_K\_BACKSPACE' \],
    input\_delete\_full \= \[ 'meta\_K\_BACKSPACE' \],

    \# Viewport.
    viewport\_leftarrow \= \[ 'any\_K\_LEFT', 'any\_KP\_LEFT' \],
    viewport\_rightarrow \= \[ 'any\_K\_RIGHT', 'any\_KP\_RIGHT' \],
    viewport\_uparrow \= \[ 'any\_K\_UP', 'any\_KP\_UP' \],
    viewport\_downarrow \= \[ 'any\_K\_DOWN', 'any\_KP\_DOWN' \],
    viewport\_wheelup \= \[ 'mousedown\_4' \],
    viewport\_wheeldown \= \[ 'mousedown\_5' \],
    viewport\_drag\_start \= \[ 'mousedown\_1' \],
    viewport\_drag\_end \= \[ 'mouseup\_1' \],
    viewport\_pageup \= \[ 'any\_K\_PAGEUP', 'any\_KP\_PAGEUP'\],
    viewport\_pagedown \= \[ 'any\_K\_PAGEDOWN', 'any\_KP\_PAGEDOWN' \],

    \# These keys control skipping.
    skip \= \[ 'K\_LCTRL', 'K\_RCTRL' \],
    stop\_skipping \= \[ \],
    toggle\_skip \= \[ 'K\_TAB' \],
    fast\_skip \= \[ '>', 'shift\_K\_PERIOD' \],

    \# Bar.
    bar\_activate \= \[ 'mousedown\_1', 'K\_RETURN', 'K\_KP\_ENTER', 'K\_SELECT' \],
    bar\_deactivate \= \[ 'mouseup\_1', 'K\_RETURN', 'K\_KP\_ENTER', 'K\_SELECT' \],
    bar\_left \= \[ 'any\_K\_LEFT', 'any\_KP\_LEFT' \],
    bar\_right \= \[ 'any\_K\_RIGHT', 'any\_KP\_RIGHT' \],
    bar\_up \= \[ 'any\_K\_UP', 'any\_KP\_UP' \],
    bar\_down \= \[ 'any\_K\_DOWN', 'any\_KP\_DOWN' \],

    \# Delete a save.
    save\_delete \= \[ 'K\_DELETE', 'KP\_DELETE' \],

    \# Draggable.
    drag\_activate \= \[ 'mousedown\_1' \],
    drag\_deactivate \= \[ 'mouseup\_1' \],

    \# Debug console.
    console \= \[ 'shift\_K\_o', 'alt\_shift\_K\_o' \],
    console\_older \= \[ 'any\_K\_UP', 'any\_KP\_UP' \],
    console\_newer \= \[ 'any\_K\_DOWN', 'any\_KP\_DOWN' \],

    \# Director
    director \= \[ 'noshift\_K\_d' \],

    \# Ignored (kept for backwards compatibility).
    toggle\_music \= \[ \],
    viewport\_up \= \[ \],
    viewport\_down \= \[ \],

    \# Profile commands.
    performance \= \[ 'K\_F3' \],
    image\_load\_log \= \[ 'K\_F4' \],
    profile\_once \= \[ 'K\_F8' \],
    memory\_profile \= \[ 'K\_F7' \],

)

Gamepad bindings work a little differently. Gamepad bindings work by mapping a gamepad event to one or more Ren'Py event names. The default set of gamepad bindings is given below:

config.pad\_bindings \= {
    "pad\_leftshoulder\_press" : \[ "rollback", \],
    "pad\_lefttrigger\_pos" : \[ "rollback", \],
    "pad\_back\_press" : \[ "rollback", \],

    "repeat\_pad\_leftshoulder\_press" : \[ "rollback", \],
    "repeat\_pad\_lefttrigger\_pos" : \[ "rollback", \],
    "repeat\_pad\_back\_press" : \[ "rollback", \],

    "pad\_guide\_press" : \[ "game\_menu", \],
    "pad\_start\_press" : \[ "game\_menu", \],

    "pad\_y\_press" : \[ "hide\_windows", \],
    "pad\_x\_press" : \[ "button\_alternate" \],

    "pad\_rightshoulder\_press" : \[ "rollforward", \],
    "repeat\_pad\_rightshoulder\_press" : \[ "rollforward", \],

    "pad\_righttrigger\_pos" : \[ "dismiss", "button\_select", "bar\_activate", "bar\_deactivate" \],
    "pad\_a\_press" : \[ "dismiss", "button\_select", "bar\_activate", "bar\_deactivate"\],
    "pad\_b\_press" : \[ "game\_menu" \],

    "pad\_dpleft\_press" : \[ "focus\_left", "bar\_left", "viewport\_leftarrow" \],
    "pad\_leftx\_neg" : \[ "focus\_left", "bar\_left", "viewport\_leftarrow" \],
    "pad\_rightx\_neg" : \[ "focus\_left", "bar\_left", "viewport\_leftarrow" \],

    "pad\_dpright\_press" : \[ "focus\_right", "bar\_right", "viewport\_rightarrow" \],
    "pad\_leftx\_pos" : \[ "focus\_right", "bar\_right", "viewport\_rightarrow" \],
    "pad\_rightx\_pos" : \[ "focus\_right", "bar\_right", "viewport\_rightarrow" \],

    "pad\_dpup\_press" : \[ "focus\_up", "bar\_up", "viewport\_uparrow" \],
    "pad\_lefty\_neg" : \[ "focus\_up", "bar\_up", "viewport\_uparrow" \],
    "pad\_righty\_neg" : \[ "focus\_up", "bar\_up", "viewport\_uparrow" \],

    "pad\_dpdown\_press" : \[ "focus\_down", "bar\_down", "viewport\_downarrow" \],
    "pad\_lefty\_pos" : \[ "focus\_down", "bar\_down", "viewport\_downarrow" \],
    "pad\_righty\_pos" : \[ "focus\_down", "bar\_down", "viewport\_downarrow" \],

    "repeat\_pad\_dpleft\_press" : \[ "focus\_left", "bar\_left", "viewport\_leftarrow" \],
    "repeat\_pad\_leftx\_neg" : \[ "focus\_left", "bar\_left", "viewport\_leftarrow" \],
    "repeat\_pad\_rightx\_neg" : \[ "focus\_left", "bar\_left", "viewport\_leftarrow" \],

    "repeat\_pad\_dpright\_press" : \[ "focus\_right", "bar\_right", "viewport\_rightarrow" \],
    "repeat\_pad\_leftx\_pos" : \[ "focus\_right", "bar\_right", "viewport\_rightarrow" \],
    "repeat\_pad\_rightx\_pos" : \[ "focus\_right", "bar\_right", "viewport\_rightarrow" \],

    "repeat\_pad\_dpup\_press" : \[ "focus\_up", "bar\_up", "viewport\_uparrow" \],
    "repeat\_pad\_lefty\_neg" : \[ "focus\_up", "bar\_up", "viewport\_uparrow" \],
    "repeat\_pad\_righty\_neg" : \[ "focus\_up", "bar\_up", "viewport\_uparrow" \],

    "repeat\_pad\_dpdown\_press" : \[ "focus\_down", "bar\_down", "viewport\_downarrow" \],
    "repeat\_pad\_lefty\_pos" : \[ "focus\_down", "bar\_down", "viewport\_downarrow" \],
    "repeat\_pad\_righty\_pos" : \[ "focus\_down", "bar\_down", "viewport\_downarrow" \],
}

Gamepad buttons have an event name of the form "pad\_\*button\*\_press" or "pad\_\*button\*\_release". Analog axis events have the form "pad\_\*axis\*\_pos", "pad\_\*axis\*\_neg", or "pad\_\*axis\*\_zero". If held down, a second gamepad binding is generated, with the "repeat\_" prefix.

Gamepads that do not work without special initialization are disabled by default. This includes the Nintendo Switch Pro Controller, which requires special initialization to work on a PC. This blocklisting is controlled by .

renpy.clear\_keymap\_cache()

Clears the keymap cache. This allows changes to  to take effect without restarting Ren'Py.
